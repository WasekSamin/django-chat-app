{% load static %}

{% comment %}Gravatar plugin{% endcomment %}
<link rel="stylesheet" href="{% static 'css/gravatar.css' %}">
<script src="{% static 'js/gravatar.min.js' %}" defer></script>

{% comment %}Custom css + js{% endcomment %}
<link rel="stylesheet" href="{% static 'css/chatRightMiddle.css' %}">
<script src="{% static 'js/chatRightMiddle.js' %}" defer></script>

<div class="h-full">
    <div class="h-full flex flex-col gap-y-3 py-3 overflow-x-hidden overflow-y-auto chat__rightMiddleChat">
        {% for chat in chats %}
            <div class="flex {% if request.session.email %}{% if chat.sender.email == request.session.email %}justify-end{% else %}justify-start{% endif %}{% endif %}">
                <div class="flex gap-x-1 w-1/2">
                    <div>
                        <div data-avatar="{{ chat.sender.username }}" class="avatarBlock round"></div>
                    </div>
                    <div class="flex flex-col gap-y-1.5">
                        <p class="font-semibold right__middleUsername">
                            {% if chat.sender %}
                                {{ chat.sender.username }}
                            {% else %}
                                {{ chat.receiver.username }}
                            {% endif %}
                        </p>
                        {% if chat.message %}
                            <p class="text-400">{{ chat.message }}</p>
                        {% elif chat.audio %}
                            <div>
                                <audio src="/media/{{ chat.audio }}"></audio>
                            </div>
                        {% endif %}
                        <p class="text-500 text-xs">{{ chat.created_at }}</p>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>